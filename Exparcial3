package com.mycompany.fin;

public class Consulta {
    private int ci;
    private String nomPaciente;
    private String ApPaciente;
    private int idMed;
    private int dia;
    private String mes;
    private int anio;

    public Consulta(int ci, String nomPaciente, String ApPaciente, int idMed, int dia, String mes, int anio) {
        this.ci = ci;
        this.nomPaciente = nomPaciente;
        this.ApPaciente = ApPaciente;
        this.idMed = idMed;
        this.dia = dia;
        this.mes = mes;
        this.anio = anio;
    }

    public Consulta() {}

    public int getCi() { return ci; }
    public String getNomPaciente() { return nomPaciente; }
    public String getApPaciente() { return ApPaciente; }
    public int getIdMed() { return idMed; }
    public int getDia() { return dia; }
    public String getMes() { return mes; }
    public int getAnio() { return anio; }

    public void setCi(int ci) { this.ci = ci; }
    public void setNomPaciente(String nomPaciente) { this.nomPaciente = nomPaciente; }
    public void setApPaciente(String ApPaciente) { this.ApPaciente = ApPaciente; }
    public void setIdMed(int idMed) { this.idMed = idMed; }
    public void setDia(int dia) { this.dia = dia; }
    public void setMes(String mes) { this.mes = mes; }
    public void setAnio(int anio) { this.anio = anio; }

    @Override
    public String toString() {
        return "Consulta{" + "ci=" + ci + ", nomPaciente=" + nomPaciente + 
               ", ApPaciente=" + ApPaciente + ", idMed=" + idMed + 
               ", dia=" + dia + ", mes=" + mes + ", anio=" + anio + '}';
    }
}
package com.mycompany.fin;

import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;
import java.io.File;
import java.io.FileReader;
import java.io.FileWriter;
import java.lang.reflect.Type;
import java.util.ArrayList;
import java.util.List;

public class Consultorio {
    private String medicos;
    private String consultas;

    public Consultorio(String med, String con) {
        this.medicos = med;
        this.consultas = con;

        try {
            File f = new File(this.medicos);
            if(!f.exists()) {
                try(FileWriter nuevo = new FileWriter(this.medicos)) {
                    new Gson().toJson(new ArrayList<Medico>(), nuevo);
                }
            }
        } catch(Exception e) { System.out.println(e); }

        try {
            File f2 = new File(this.consultas);
            if(!f2.exists()) {
                try(FileWriter nuevo2 = new FileWriter(this.consultas)) {
                    new Gson().toJson(new ArrayList<Consulta>(), nuevo2);
                }
            }
        } catch(Exception e) { System.out.println(e); }
    }

    public List<Medico> leerMedicos(){
        try {
            File arch = new File(this.medicos);
            if (!arch.exists()) return new ArrayList<>();
            Type lista = new TypeToken<List<Medico>>() {}.getType();
            List<Medico> resultado = new Gson().fromJson(new FileReader(this.medicos), lista);
            return resultado != null ? resultado : new ArrayList<>();
        } catch(Exception e) { System.out.println(e); return new ArrayList<>(); }
    }

    public List<Consulta> leerConsutas(){
        try {
            File arch = new File(this.consultas);
            if (!arch.exists()) return new ArrayList<>();
            Type lista = new TypeToken<List<Consulta>>() {}.getType();
            List<Consulta> resultado = new Gson().fromJson(new FileReader(this.consultas), lista);
            return resultado != null ? resultado : new ArrayList<>();
        } catch(Exception e) { System.out.println(e); return new ArrayList<>(); }
    }

    public void modificarM(List<Medico> lista){
        try(FileWriter escritor = new FileWriter(this.medicos)) {
            new Gson().toJson(lista, escritor);
        } catch(Exception e) { System.out.println(e); }
    }

    public void modificarC(List<Consulta> lista){
        try(FileWriter escritor = new FileWriter(this.consultas)) {
            new Gson().toJson(lista, escritor);
        } catch(Exception e) { System.out.println(e); }
    }

    public void altaMedico(Medico m){
        List<Medico> todas = this.leerMedicos();
        todas.add(m);
        this.modificarM(todas);
        System.out.println("Médico agregado con éxito");
    }

    public void altaConsulta(Consulta c){
        List<Consulta> todas = this.leerConsutas();
        todas.add(c);
        this.modificarC(todas);
        System.out.println("Consulta agregada con éxito");
    }

    public void bajaMedico(String nombre, String apellido){
        List<Medico> medicos = this.leerMedicos();
        List<Consulta> consultas = this.leerConsutas();

        Medico eliminado = null;
        for(Medico m : medicos) {
            if(m.getNombreMed().equals(nombre) && m.getApmedico().equals(apellido)) {
                eliminado = m;
                break;
            }
        }

        if(eliminado != null){
            medicos.remove(eliminado);

            List<Consulta> nuevas = new ArrayList<>();
            for(Consulta c : consultas){
                if(c.getIdMed() != eliminado.getIdMedico()){
                    nuevas.add(c);
                }
            }

            this.modificarM(medicos);
            this.modificarC(nuevas);

            System.out.println("Médico y sus consultas eliminadas.");
        } else {
            System.out.println("Médico no encontrado.");
        }
    }

    public void cambia(String m, int d){
        List<Consulta> consultas = this.leerConsutas();
        for(Consulta c : consultas){
            if ((c.getDia() == 25 || c.getDia() == 31) && c.getMes().equals("diciembre")){
                c.setDia(d);
                c.setMes(m);
            }
        }
        this.modificarC(consultas);
        System.out.println("Fechas de consultas modificadas");
    }

    public void mostrarPacientesPorDia(int dia, String mes){
        List<Consulta> consultas = this.leerConsutas();
        System.out.println("Pacientes del " + dia + " de " + mes + ":");
        for(Consulta c : consultas){
            if(c.getDia() == dia && c.getMes().equalsIgnoreCase(mes)){
                System.out.println(c.getNomPaciente() + " " + c.getApPaciente());
            }
        }
    }
}
package com.mycompany.fin;

import java.util.Scanner;

public class Fin {

    public static void main(String[] args) {
        Consultorio c = new Consultorio("medicos.json", "consultas.json");
        Scanner sc = new Scanner(System.in);

        if(c.leerMedicos().isEmpty()) {
            c.altaMedico(new Medico(1,"Juan","Perez",5));
            c.altaMedico(new Medico(2,"Ana","Lopez",3));
            c.altaMedico(new Medico(3,"Luis","Gomez",7));
        }

        if(c.leerConsutas().isEmpty()) {
            c.altaConsulta(new Consulta(101,"Carlos","Diaz",1,25,"diciembre",2025));
            c.altaConsulta(new Consulta(102,"Maria","Diaz",1,10,"enero",2025));
            c.altaConsulta(new Consulta(103,"Pedro","Ramirez",1,15,"febrero",2025));

            c.altaConsulta(new Consulta(104,"Lucia","Perez",2,25,"diciembre",2025));
            c.altaConsulta(new Consulta(105,"Sofia","Lopez",2,5,"marzo",2025));
            c.altaConsulta(new Consulta(106,"Mateo","Gomez",2,31,"diciembre",2025));

            c.altaConsulta(new Consulta(107,"Valentina","Diaz",3,20,"abril",2025));
            c.altaConsulta(new Consulta(108,"Daniel","Lopez",3,25,"diciembre",2025));
            c.altaConsulta(new Consulta(109,"Camila","Gomez",3,15,"mayo",2025));
        }

        int opcion = -1;

        while(opcion != 0){
            System.out.println("\n--- MENÚ CONSULTORIO ---");
            System.out.println("1. Dar de alta médico");
            System.out.println("2. Dar de alta consulta");
            System.out.println("3. Dar de baja médico y sus consultas");
            System.out.println("4. Cambiar fecha de Navidad/Año Nuevo");
            System.out.println("5. Mostrar pacientes por día");
            System.out.println("0. Salir");
            System.out.print("Elija opción: ");
            opcion = sc.nextInt();
            sc.nextLine();

            switch(opcion){
                case 1:
                    System.out.print("ID Médico: "); int id = sc.nextInt(); sc.nextLine();
                    System.out.print("Nombre: "); String nombre = sc.nextLine();
                    System.out.print("Apellido: "); String apellido = sc.nextLine();
                    System.out.print("Años de experiencia: "); int exp = sc.nextInt(); sc.nextLine();
                    c.altaMedico(new Medico(id,nombre,apellido,exp));
                    break;

                case 2:
                    System.out.print("CI Paciente: "); int ci = sc.nextInt(); sc.nextLine();
                    System.out.print("Nombre Paciente: "); String nPac = sc.nextLine();
                    System.out.print("Apellido Paciente: "); String aPac = sc.nextLine();
                    System.out.print("ID Médico: "); int idMed = sc.nextInt(); sc.nextLine();
                    System.out.print("Día: "); int dia = sc.nextInt(); sc.nextLine();
                    System.out.print("Mes: "); String mes = sc.nextLine();
                    System.out.print("Año: "); int anio = sc.nextInt(); sc.nextLine();
                    c.altaConsulta(new Consulta(ci,nPac,aPac,idMed,dia,mes,anio));
                    break;

                case 3:
                    System.out.print("Nombre Médico a eliminar: "); String nBaja = sc.nextLine();
                    System.out.print("Apellido Médico a eliminar: "); String aBaja = sc.nextLine();
                    c.bajaMedico(nBaja,aBaja);
                    break;

                case 4:
                    System.out.print("Nuevo mes: "); String nuevoMes = sc.nextLine();
                    System.out.print("Nuevo día: "); int nuevoDia = sc.nextInt(); sc.nextLine();
                    c.cambia(nuevoMes,nuevoDia);
                    break;

                case 5:
                    System.out.print("Día: "); int diaM = sc.nextInt(); sc.nextLine();
                    System.out.print("Mes: "); String mesM = sc.nextLine();
                    c.mostrarPacientesPorDia(diaM,mesM);
                    break;

                case 0:
                    System.out.println("Saliendo...");
                    break;

                default:
                    System.out.println("Opción inválida");
            }
        }
        sc.close();
    }
}
package com.mycompany.fin;

public class Medico {
    private int idMedico;
    private String NombreMed;
    private String Apmedico;
    private int aniosExp;

    public Medico(int idMedico, String NombreMed, String Apmedico, int aniosExp) {
        this.idMedico = idMedico;
        this.NombreMed = NombreMed;
        this.Apmedico = Apmedico;
        this.aniosExp = aniosExp;
    }

    public Medico() {}

    public int getIdMedico() { return idMedico; }
    public String getNombreMed() { return NombreMed; }
    public String getApmedico() { return Apmedico; }
    public int getAniosExp() { return aniosExp; }

    public void setIdMedico(int idMedico) { this.idMedico = idMedico; }
    public void setNombreMed(String NombreMed) { this.NombreMed = NombreMed; }
    public void setApmedico(String Apmedico) { this.Apmedico = Apmedico; }
    public void setAniosExp(int aniosExp) { this.aniosExp = aniosExp; }

    @Override
    public String toString() {
        return "Medico{" + "idMedico=" + idMedico + ", NombreMed=" + NombreMed + 
               ", Apmedico=" + Apmedico + ", aniosExp=" + aniosExp + '}';
    }
}